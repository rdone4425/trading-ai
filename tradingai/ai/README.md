# AI æ¨¡å—æ¶æ„è¯´æ˜

## ğŸ“ ç›®å½•ç»“æ„

```
tradingai/ai/
â”œâ”€â”€ __init__.py              # æ¨¡å—å¯¼å‡º
â”œâ”€â”€ providers/               # ğŸ”Œ AI æä¾›å•†ï¼ˆé€šä¿¡å±‚ï¼‰
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ base.py             # æä¾›å•†åŸºç±»
â”‚   â”œâ”€â”€ factory.py          # æä¾›å•†å·¥å‚
â”‚   â”œâ”€â”€ mock_provider.py    # Mock æä¾›å•†ï¼ˆæµ‹è¯•ç”¨ï¼‰
â”‚   â””â”€â”€ deepseek_provider.py  # DeepSeek æä¾›å•†
â”œâ”€â”€ analyzers/               # ğŸ¯ åˆ†æå™¨ï¼ˆä¸šåŠ¡å±‚ï¼‰
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ market_analyzer.py  # å¸‚åœºåˆ†æå™¨
â””â”€â”€ prompts/                 # ğŸ“ æç¤ºè¯ï¼ˆæ¨¡æ¿å±‚ï¼‰
    â””â”€â”€ __init__.py
```

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### ä¸‰å±‚åˆ†ç¦»æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  analyzers/ (ä¸šåŠ¡å±‚)                             â”‚
â”‚  - å¸‚åœºåˆ†æ                                       â”‚
â”‚  - ä¿¡å·ç”Ÿæˆ                                       â”‚
â”‚  - é£é™©è¯„ä¼°                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ è°ƒç”¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  providers/ (é€šä¿¡å±‚)                             â”‚
â”‚  - OpenAI/DeepSeek                               â”‚
â”‚  - Claude                                        â”‚
â”‚  - æœ¬åœ°æ¨¡å‹                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ ä½¿ç”¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  prompts/ (æ¨¡æ¿å±‚)                               â”‚
â”‚  - æç¤ºè¯æ¨¡æ¿                                     â”‚
â”‚  - è§’è‰²è®¾å®š                                       â”‚
â”‚  - æ ¼å¼è¦æ±‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ å„å±‚èŒè´£

### 1. providers/ - AI æä¾›å•†ï¼ˆé€šä¿¡å±‚ï¼‰

**èŒè´£ï¼š**åªè´Ÿè´£ä¸ AI API çš„é€šä¿¡

**ä¸åŒ…å«ï¼š**
- âŒ ä¸šåŠ¡é€»è¾‘ï¼ˆå¸‚åœºåˆ†æç­‰ï¼‰
- âŒ æç¤ºè¯æ„å»º
- âŒ ç»“æœè§£æ

**åªåŒ…å«ï¼š**
- âœ… API è¿æ¥
- âœ… æ¶ˆæ¯å‘é€
- âœ… å“åº”æ¥æ”¶

**ç¤ºä¾‹ï¼š**
```python
# æä¾›å•†åªè´Ÿè´£é€šä¿¡
provider = AIProviderFactory.create("deepseek", api_key="xxx")
response = await provider.chat(messages=[...])
```

### 2. analyzers/ - åˆ†æå™¨ï¼ˆä¸šåŠ¡å±‚ï¼‰

**èŒè´£ï¼š**ä½¿ç”¨ AI æä¾›å•†å®Œæˆå…·ä½“ä¸šåŠ¡

**åŒ…å«ï¼š**
- âœ… å¸‚åœºæ•°æ®åˆ†æ
- âœ… äº¤æ˜“ä¿¡å·ç”Ÿæˆ
- âœ… é£é™©è¯„ä¼°
- âœ… ç»“æœè§£æ

**ç¤ºä¾‹ï¼š**
```python
# åˆ†æå™¨è´Ÿè´£ä¸šåŠ¡é€»è¾‘
analyzer = MarketAnalyzer(provider)
result = await analyzer.analyze_market(symbol, klines, indicators)
# result = {"signal": "buy", "confidence": 0.8, ...}
```

### 3. prompts/ - æç¤ºè¯ï¼ˆæ¨¡æ¿å±‚ï¼‰

**èŒè´£ï¼š**ç®¡ç†å„ç§åœºæ™¯çš„æç¤ºè¯æ¨¡æ¿

**åŒ…å«ï¼š**
- âœ… ç³»ç»Ÿè§’è‰²è®¾å®š
- âœ… è¾“å…¥æ ¼å¼è¦æ±‚
- âœ… è¾“å‡ºæ ¼å¼è§„èŒƒ
- âœ… ç¤ºä¾‹å’Œè¯´æ˜

## ğŸ”„ ä½¿ç”¨æµç¨‹

```python
# 1. åˆ›å»ºæä¾›å•†ï¼ˆé€šä¿¡å±‚ï¼‰
provider = AIProviderFactory.create_from_config()

# 2. åˆ›å»ºåˆ†æå™¨ï¼ˆä¸šåŠ¡å±‚ï¼‰
analyzer = MarketAnalyzer(provider)

# 3. æ‰§è¡Œåˆ†æ
result = await analyzer.analyze_market(
    symbol="BTCUSDT",
    klines=klines_data,
    indicators=indicators_data
)

# 4. ä½¿ç”¨ç»“æœ
if result["signal"] == "buy":
    print(f"ä¹°å…¥ä¿¡å·ï¼Œç½®ä¿¡åº¦ï¼š{result['confidence']:.2%}")
```

## âœ¨ ä¼˜åŠ¿

1. **èŒè´£æ¸…æ™°**
   - æä¾›å•†ä¸“æ³¨é€šä¿¡
   - åˆ†æå™¨ä¸“æ³¨ä¸šåŠ¡
   - æç¤ºè¯ç‹¬ç«‹ç®¡ç†

2. **æ˜“äºæ‰©å±•**
   - æ·»åŠ æ–°æä¾›å•†ï¼šåªéœ€å®ç° `BaseAIProvider`
   - æ·»åŠ æ–°åˆ†æåŠŸèƒ½ï¼šåˆ›å»ºæ–°çš„åˆ†æå™¨ç±»
   - ä¿®æ”¹æç¤ºè¯ï¼šåªéœ€ä¿®æ”¹æ¨¡æ¿

3. **æ˜“äºæµ‹è¯•**
   - å¯ä»¥ç‹¬ç«‹æµ‹è¯•æ¯ä¸€å±‚
   - Mock æä¾›å•†ç”¨äºæµ‹è¯•
   - ä¸šåŠ¡é€»è¾‘ä¸é€šä¿¡è§£è€¦

4. **æ˜“äºç»´æŠ¤**
   - ä¿®æ”¹ AI API ä¸å½±å“ä¸šåŠ¡é€»è¾‘
   - ä¿®æ”¹ä¸šåŠ¡é€»è¾‘ä¸å½±å“é€šä¿¡å±‚
   - ç›®å½•ç»“æ„æ¸…æ™°æ˜äº†

## ğŸš€ æ·»åŠ æ–°æä¾›å•†

```python
# tradingai/ai/providers/deepseek_provider.py
from .base import BaseAIProvider

class DeepSeekProvider(BaseAIProvider):
    async def chat(self, messages, **kwargs):
        # åªè´Ÿè´£ä¸ DeepSeek API é€šä¿¡
        ...
    
    def get_provider_name(self):
        return "DeepSeek"
```

## ğŸ¯ æ·»åŠ æ–°åˆ†æå™¨

```python
# tradingai/ai/analyzers/risk_analyzer.py
from ..providers.base import BaseAIProvider

class RiskAnalyzer:
    def __init__(self, provider: BaseAIProvider):
        self.provider = provider
    
    async def assess_risk(self, ...):
        # ä½¿ç”¨æä¾›å•†è¿›è¡Œé£é™©è¯„ä¼°
        ...
```

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **æä¾›å•†ä¸åº”åŒ…å«ä¸šåŠ¡é€»è¾‘**
   - âŒ ä¸è¦åœ¨æä¾›å•†ä¸­åˆ†æå¸‚åœº
   - âœ… åªè´Ÿè´£å‘é€å’Œæ¥æ”¶æ¶ˆæ¯

2. **åˆ†æå™¨åº”è¯¥å¯å¤ç”¨**
   - âœ… å¯ä»¥ä½¿ç”¨ä»»ä½•æä¾›å•†
   - âœ… ä¸šåŠ¡é€»è¾‘ç‹¬ç«‹äºå…·ä½“ AI

3. **ä¿æŒå±‚æ¬¡åˆ†æ˜**
   - âœ… providers/ åªå¯¼å…¥åŸºç¡€åº“
   - âœ… analyzers/ å¯ä»¥å¯¼å…¥ providers/
   - âœ… prompts/ ç‹¬ç«‹äºå…¶ä»–å±‚


